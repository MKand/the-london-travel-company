{
  "serialized_application_template": {
    "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app",
    "displayName": "lta-dev-app",
    "iacFormat": "TERRAFORM",
    "components": [
      {
        "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/frontend-service-cloud-run",
        "sharedTemplateRevisionUri": "projects/gcpdesigncenter/locations/us-central1/spaces/googlespace/sharedTemplates/1b5e09c8-780f-484e-b8ed-c7178f4e4342/revisions/ea61ff2b-3266-41f5-9b13-dede5b824d2d",
        "parameters": [
          {
            "key": "project_id",
            "value": "SOURCE_PROJECT_ID"
          },
          {
            "key": "location",
            "value": "us-central1"
          },
          {
            "key": "service_name",
            "value": "lta-ui"
          },
          {
            "key": "containers",
            "value": [
              {
                "container_name": "service-container",
                "container_image": "us-central1-docker.pkg.dev/o11y-movie-guru/london-travel-agency/frontend:adclab-v2",
                "env_vars": {
                  "API_BASE_URL": "module.backend-service-cloud-run.service_uri"
                },
                "ports": {
                  "name": "http1",
                  "container_port": 80
                },
                "resources": {
                  "startup_cpu_boost": false,
                  "cpu_idle": true
                }
              }
            ]
          },
          {
            "key": "ingress",
            "value": "INGRESS_TRAFFIC_INTERNAL_LOAD_BALANCER"
          },
          {
            "key": "members",
            "value": [
              "allUsers"
            ]
          },
          {
            "key": "enable_prometheus_sidecar",
            "value": false
          }
        ],
        "connections": [
          {
            "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/frontend-service-cloud-run/connections/frontend-backend-conn",
            "destinationComponentUri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/backend-service-cloud-run",
            "sourceComponentParameters": [
              {
                "key": "containers[0].env_vars",
                "value": {
                  "backend_service_cloud_run_SERVICE_ENDPOINT": "module.backend-service-cloud-run.service_uri"
                }
              },
              {
                "key": "service_account_project_roles",
                "value": [
                  "roles/run.invoker"
                ]
              }
            ]
          }
        ],
        "roles": [
          "roles/run.admin",
          "roles/iam.serviceAccountAdmin",
          "roles/iam.serviceAccountUser",
          "roles/serviceusage.serviceUsageViewer",
          "roles/resourcemanager.projectIamAdmin",
          "roles/compute.viewer",
          "roles/iap.admin",
          "roles/serviceusage.serviceUsageAdmin"
        ],
        "apis": [
          "cloudresourcemanager.googleapis.com",
          "compute.googleapis.com",
          "iam.googleapis.com",
          "iap.googleapis.com",
          "monitoring.googleapis.com",
          "run.googleapis.com",
          "serviceusage.googleapis.com",
          "storage-api.googleapis.com"
        ],
        "connectionsParameters": [
          {
            "connection": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/frontend-service-cloud-run/connections/frontend-backend-conn",
            "parameters": [
              {
                "key": "containers[0].env_vars",
                "value": {
                  "backend_service_cloud_run_SERVICE_ENDPOINT": "module.backend-service-cloud-run.service_uri"
                }
              },
              {
                "key": "service_account_project_roles",
                "value": [
                  "roles/run.invoker"
                ]
              }
            ]
          },
          {
            "connection": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-backend/connections/lb-backend-frontend-service-cloudrun-conn"
          }
        ],
        "componentParameterSchema": [
          {
            "key": "project_id",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "location",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "service_name",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "description",
            "type": "string"
          },
          {
            "key": "containers",
            "isRequired": true,
            "type": "list(object({\n    container_name       = optional(string, null)\n    container_image      = string\n    working_dir          = optional(string, null)\n    depends_on_container = optional(list(string), null)\n    container_args       = optional(list(string), null)\n    container_command    = optional(list(string), null)\n    env_vars             = optional(map(string), {})\n    env_secret_vars = optional(map(object({\n      secret  = string\n      version = string\n    })), {})\n    volume_mounts = optional(list(object({\n      name       = string\n      mount_path = string\n    })), [])\n    ports = optional(object({\n      name           = optional(string, \"http1\")\n      container_port = optional(number, 8080)\n    }), {})\n    resources = optional(object({\n      limits = optional(object({\n        cpu        = optional(string)\n        memory     = optional(string)\n        nvidia_gpu = optional(string)\n      }))\n      cpu_idle          = optional(bool, true)\n      startup_cpu_boost = optional(bool, false)\n    }), {})\n    startup_probe = optional(object({\n      failure_threshold     = optional(number, null)\n      initial_delay_seconds = optional(number, null)\n      timeout_seconds       = optional(number, null)\n      period_seconds        = optional(number, null)\n      http_get = optional(object({\n        path = optional(string)\n        port = optional(string)\n        http_headers = optional(list(object({\n          name  = string\n          value = string\n        })), [])\n      }), null)\n      tcp_socket = optional(object({\n        port = optional(number)\n      }), null)\n      grpc = optional(object({\n        port    = optional(number)\n        service = optional(string)\n      }), null)\n    }), null)\n    liveness_probe = optional(object({\n      failure_threshold     = optional(number, null)\n      initial_delay_seconds = optional(number, null)\n      timeout_seconds       = optional(number, null)\n      period_seconds        = optional(number, null)\n      http_get = optional(object({\n        path = optional(string)\n        port = optional(string)\n        http_headers = optional(list(object({\n          name  = string\n          value = string\n        })), [])\n      }), null)\n      tcp_socket = optional(object({\n        port = optional(number)\n      }), null)\n      grpc = optional(object({\n        port    = optional(number)\n        service = optional(string)\n      }), null)\n    }), null)\n  }))"
          },
          {
            "key": "node_selector",
            "type": "object({\n    accelerator = string\n  })"
          },
          {
            "key": "gpu_zonal_redundancy_disabled",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "create_service_account",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "service_account_project_roles",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "ingress",
            "defaultValue": "INGRESS_TRAFFIC_ALL",
            "type": "string"
          },
          {
            "key": "members",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "iap_members",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "vpc_access",
            "type": "object({\n    connector = optional(string)\n    egress    = optional(string)\n    network_interfaces = optional(object({\n      network    = optional(string)\n      subnetwork = optional(string)\n      tags       = optional(list(string))\n    }))\n  })"
          },
          {
            "key": "cloud_run_deletion_protection",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "enable_prometheus_sidecar",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "volumes",
            "defaultValue": [],
            "type": "list(object({\n    name = string\n    secret = optional(object({\n      secret       = string\n      default_mode = optional(string)\n      items = optional(object({\n        path    = string\n        version = optional(string)\n        mode    = optional(string)\n      }))\n    }))\n    cloud_sql_instance = optional(object({\n      instances = optional(list(string))\n    }))\n    empty_dir = optional(object({\n      medium     = optional(string)\n      size_limit = optional(string)\n    }))\n    gcs = optional(object({\n      bucket    = string\n      read_only = optional(string)\n    }))\n    nfs = optional(object({\n      server    = string\n      path      = string\n      read_only = optional(string)\n    }))\n  }))"
          },
          {
            "key": "traffic",
            "defaultValue": [],
            "type": "list(object({\n    type     = optional(string, \"TRAFFIC_TARGET_ALLOCATION_TYPE_LATEST\")\n    percent  = optional(number, 100)\n    revision = optional(string, null)\n    tag      = optional(string, null)\n  }))"
          },
          {
            "key": "service_scaling",
            "type": "object({\n    min_instance_count = optional(number)\n  })"
          },
          {
            "key": "service_labels",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "service_annotations",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "client",
            "defaultValue": {},
            "type": "object({\n    name    = optional(string, null)\n    version = optional(string, null)\n  })"
          },
          {
            "key": "launch_stage",
            "defaultValue": "GA",
            "type": "string"
          },
          {
            "key": "custom_audiences",
            "type": "list(string)"
          },
          {
            "key": "binary_authorization",
            "type": "object({\n    breakglass_justification = optional(bool) # If present, indicates to use Breakglass using this justification. If useDefault is False, then it must be empty. For more information on breakglass, [see](https://cloud.google.com/binary-authorization/docs/using-breakglass)\n    use_default              = optional(bool) #If True, indicates to use the default project's binary authorization policy. If False, binary authorization will be disabled.\n  })"
          },
          {
            "key": "revision",
            "type": "string"
          },
          {
            "key": "template_scaling",
            "type": "object({\n    min_instance_count = optional(number)\n    max_instance_count = optional(number)\n  })"
          },
          {
            "key": "template_labels",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "template_annotations",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "timeout",
            "type": "string"
          },
          {
            "key": "service_account",
            "type": "string"
          },
          {
            "key": "encryption_key",
            "type": "string"
          },
          {
            "key": "max_instance_request_concurrency",
            "type": "string"
          },
          {
            "key": "session_affinity",
            "type": "string"
          },
          {
            "key": "execution_environment",
            "defaultValue": "EXECUTION_ENVIRONMENT_GEN2",
            "type": "string"
          }
        ]
      },
      {
        "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/backend-service-cloud-run",
        "sharedTemplateRevisionUri": "projects/gcpdesigncenter/locations/us-central1/spaces/googlespace/sharedTemplates/1b5e09c8-780f-484e-b8ed-c7178f4e4342/revisions/ea61ff2b-3266-41f5-9b13-dede5b824d2d",
        "parameters": [
          {
            "key": "project_id",
            "value": "SOURCE_PROJECT_ID"
          },
          {
            "key": "location",
            "value": "us-central1"
          },
          {
            "key": "service_name",
            "value": "lta-agent"
          },
          {
            "key": "containers",
            "value": [
              {
                "resources": {
                  "cpu_idle": true,
                  "startup_cpu_boost": false
                },
                "container_name": "service-container",
                "container_image": "us-central1-docker.pkg.dev/o11y-movie-guru/london-travel-agency/agent:adclab-v2",
                "env_vars": {
                  "GOOGLE_CLOUD_PROJECT": "SOURCE_PROJECT_ID"
                },
                "ports": {
                  "name": "http1",
                  "container_port": 8000
                }
              }
            ]
          },
          {
            "key": "service_account_project_roles",
            "value": [
              "roles/aiplatform.user",
              "roles/monitoring.metricWriter",
              "roles/cloudtrace.agent",
              "roles/logging.logWriter",
              "roles/telemetry.writer"
            ]
          },
          {
            "key": "members",
            "value": [
              "allUsers"
            ]
          },
          {
            "key": "vpc_access",
            "value": {
              "egress": "PRIVATE_RANGES_ONLY",
              "network_interfaces": {
                "subnetwork": "default",
                "network": "default"
              }
            }
          }
        ],
        "roles": [
          "roles/run.admin",
          "roles/iam.serviceAccountAdmin",
          "roles/iam.serviceAccountUser",
          "roles/serviceusage.serviceUsageViewer",
          "roles/resourcemanager.projectIamAdmin",
          "roles/compute.viewer",
          "roles/iap.admin",
          "roles/serviceusage.serviceUsageAdmin"
        ],
        "apis": [
          "cloudresourcemanager.googleapis.com",
          "compute.googleapis.com",
          "iam.googleapis.com",
          "iap.googleapis.com",
          "monitoring.googleapis.com",
          "run.googleapis.com",
          "serviceusage.googleapis.com",
          "storage-api.googleapis.com"
        ],
        "componentParameterSchema": [
          {
            "key": "project_id",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "location",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "service_name",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "description",
            "type": "string"
          },
          {
            "key": "containers",
            "isRequired": true,
            "type": "list(object({\n    container_name       = optional(string, null)\n    container_image      = string\n    working_dir          = optional(string, null)\n    depends_on_container = optional(list(string), null)\n    container_args       = optional(list(string), null)\n    container_command    = optional(list(string), null)\n    env_vars             = optional(map(string), {})\n    env_secret_vars = optional(map(object({\n      secret  = string\n      version = string\n    })), {})\n    volume_mounts = optional(list(object({\n      name       = string\n      mount_path = string\n    })), [])\n    ports = optional(object({\n      name           = optional(string, \"http1\")\n      container_port = optional(number, 8080)\n    }), {})\n    resources = optional(object({\n      limits = optional(object({\n        cpu        = optional(string)\n        memory     = optional(string)\n        nvidia_gpu = optional(string)\n      }))\n      cpu_idle          = optional(bool, true)\n      startup_cpu_boost = optional(bool, false)\n    }), {})\n    startup_probe = optional(object({\n      failure_threshold     = optional(number, null)\n      initial_delay_seconds = optional(number, null)\n      timeout_seconds       = optional(number, null)\n      period_seconds        = optional(number, null)\n      http_get = optional(object({\n        path = optional(string)\n        port = optional(string)\n        http_headers = optional(list(object({\n          name  = string\n          value = string\n        })), [])\n      }), null)\n      tcp_socket = optional(object({\n        port = optional(number)\n      }), null)\n      grpc = optional(object({\n        port    = optional(number)\n        service = optional(string)\n      }), null)\n    }), null)\n    liveness_probe = optional(object({\n      failure_threshold     = optional(number, null)\n      initial_delay_seconds = optional(number, null)\n      timeout_seconds       = optional(number, null)\n      period_seconds        = optional(number, null)\n      http_get = optional(object({\n        path = optional(string)\n        port = optional(string)\n        http_headers = optional(list(object({\n          name  = string\n          value = string\n        })), [])\n      }), null)\n      tcp_socket = optional(object({\n        port = optional(number)\n      }), null)\n      grpc = optional(object({\n        port    = optional(number)\n        service = optional(string)\n      }), null)\n    }), null)\n  }))"
          },
          {
            "key": "node_selector",
            "type": "object({\n    accelerator = string\n  })"
          },
          {
            "key": "gpu_zonal_redundancy_disabled",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "create_service_account",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "service_account_project_roles",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "ingress",
            "defaultValue": "INGRESS_TRAFFIC_ALL",
            "type": "string"
          },
          {
            "key": "members",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "iap_members",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "vpc_access",
            "type": "object({\n    connector = optional(string)\n    egress    = optional(string)\n    network_interfaces = optional(object({\n      network    = optional(string)\n      subnetwork = optional(string)\n      tags       = optional(list(string))\n    }))\n  })"
          },
          {
            "key": "cloud_run_deletion_protection",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "enable_prometheus_sidecar",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "volumes",
            "defaultValue": [],
            "type": "list(object({\n    name = string\n    secret = optional(object({\n      secret       = string\n      default_mode = optional(string)\n      items = optional(object({\n        path    = string\n        version = optional(string)\n        mode    = optional(string)\n      }))\n    }))\n    cloud_sql_instance = optional(object({\n      instances = optional(list(string))\n    }))\n    empty_dir = optional(object({\n      medium     = optional(string)\n      size_limit = optional(string)\n    }))\n    gcs = optional(object({\n      bucket    = string\n      read_only = optional(string)\n    }))\n    nfs = optional(object({\n      server    = string\n      path      = string\n      read_only = optional(string)\n    }))\n  }))"
          },
          {
            "key": "traffic",
            "defaultValue": [],
            "type": "list(object({\n    type     = optional(string, \"TRAFFIC_TARGET_ALLOCATION_TYPE_LATEST\")\n    percent  = optional(number, 100)\n    revision = optional(string, null)\n    tag      = optional(string, null)\n  }))"
          },
          {
            "key": "service_scaling",
            "type": "object({\n    min_instance_count = optional(number)\n  })"
          },
          {
            "key": "service_labels",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "service_annotations",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "client",
            "defaultValue": {},
            "type": "object({\n    name    = optional(string, null)\n    version = optional(string, null)\n  })"
          },
          {
            "key": "launch_stage",
            "defaultValue": "GA",
            "type": "string"
          },
          {
            "key": "custom_audiences",
            "type": "list(string)"
          },
          {
            "key": "binary_authorization",
            "type": "object({\n    breakglass_justification = optional(bool) # If present, indicates to use Breakglass using this justification. If useDefault is False, then it must be empty. For more information on breakglass, [see](https://cloud.google.com/binary-authorization/docs/using-breakglass)\n    use_default              = optional(bool) #If True, indicates to use the default project's binary authorization policy. If False, binary authorization will be disabled.\n  })"
          },
          {
            "key": "revision",
            "type": "string"
          },
          {
            "key": "template_scaling",
            "type": "object({\n    min_instance_count = optional(number)\n    max_instance_count = optional(number)\n  })"
          },
          {
            "key": "template_labels",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "template_annotations",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "timeout",
            "type": "string"
          },
          {
            "key": "service_account",
            "type": "string"
          },
          {
            "key": "encryption_key",
            "type": "string"
          },
          {
            "key": "max_instance_request_concurrency",
            "type": "string"
          },
          {
            "key": "session_affinity",
            "type": "string"
          },
          {
            "key": "execution_environment",
            "defaultValue": "EXECUTION_ENVIRONMENT_GEN2",
            "type": "string"
          }
        ]
      },
      {
        "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-backend",
        "sharedTemplateRevisionUri": "projects/gcpdesigncenter/locations/us-central1/spaces/googlespace/sharedTemplates/4773e118-5f27-4632-ade7-0a55e5118d7e/revisions/r-9",
        "parameters": [
          {
            "key": "project_id",
            "value": "SOURCE_PROJECT_ID"
          },
          {
            "key": "region",
            "value": "us-central1"
          },
          {
            "key": "name",
            "value": "lta2"
          }
        ],
        "connections": [
          {
            "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-backend/connections/lb-backend-frontend-service-cloudrun-conn",
            "destinationComponentUri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/frontend-service-cloud-run",
            "sourceComponentParameters": [
              {
                "key": "serverless_neg_backends",
                "value": [
                  {
                    "service_version": "",
                    "type": "cloud-run",
                    "capacity_scaler": 1,
                    "region": "module.frontend-service-cloud-run.location",
                    "service_name": "module.frontend-service-cloud-run.service_name"
                  }
                ]
              }
            ]
          }
        ],
        "roles": [
          "roles/vpcaccess.admin",
          "roles/iam.serviceAccountAdmin",
          "roles/storage.admin",
          "roles/compute.admin",
          "roles/run.admin",
          "roles/iam.serviceAccountUser",
          "roles/certificatemanager.owner",
          "roles/serviceusage.serviceUsageAdmin"
        ],
        "apis": [
          "certificatemanager.googleapis.com",
          "cloudresourcemanager.googleapis.com",
          "compute.googleapis.com",
          "iam.googleapis.com",
          "run.googleapis.com",
          "serviceusage.googleapis.com",
          "storage-api.googleapis.com",
          "vpcaccess.googleapis.com"
        ],
        "connectionsParameters": [
          {
            "connection": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-backend/connections/lb-backend-frontend-service-cloudrun-conn",
            "parameters": [
              {
                "key": "serverless_neg_backends",
                "value": [
                  {
                    "service_name": "module.frontend-service-cloud-run.service_name",
                    "service_version": "",
                    "type": "cloud-run",
                    "capacity_scaler": 1,
                    "region": "module.frontend-service-cloud-run.location"
                  }
                ]
              }
            ]
          },
          {
            "connection": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-frontend/connections/lb-frontend-lb-backend-conn"
          }
        ],
        "componentParameterSchema": [
          {
            "key": "project_id",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "region",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "name",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "host_path_mappings",
            "defaultValue": [
              {
                "host": "*",
                "path": "/*"
              }
            ],
            "type": "list(object({\n    host = string\n    path = string\n  }))"
          },
          {
            "key": "serverless_neg_backends",
            "defaultValue": [],
            "type": "list(object({\n    region          = string\n    type            = string // cloud-run, cloud-function, and app-engine\n    service_name    = string\n    service_version = optional(string)\n    capacity_scaler = optional(number, 1.0)\n  }))"
          },
          {
            "key": "groups",
            "defaultValue": [],
            "type": "list(object({\n    group       = string\n    description = optional(string)\n\n    balancing_mode               = optional(string)\n    capacity_scaler              = optional(number, 1.0)\n    max_connections              = optional(number)\n    max_connections_per_instance = optional(number)\n    max_connections_per_endpoint = optional(number)\n    max_rate                     = optional(number)\n    max_rate_per_instance        = optional(number)\n    max_rate_per_endpoint        = optional(number)\n    max_utilization              = optional(number)\n  }))"
          },
          {
            "key": "load_balancing_scheme",
            "defaultValue": "EXTERNAL_MANAGED",
            "type": "string"
          },
          {
            "key": "protocol",
            "defaultValue": "HTTP",
            "type": "string"
          },
          {
            "key": "port_name",
            "defaultValue": "http",
            "type": "string"
          },
          {
            "key": "description",
            "type": "string"
          },
          {
            "key": "health_check",
            "type": "object({\n    host                = optional(string, null)\n    request_path        = optional(string, null)\n    request             = optional(string, null)\n    response            = optional(string, null)\n    port                = optional(number, null)\n    port_name           = optional(string, null)\n    proxy_header        = optional(string, null)\n    port_specification  = optional(string, null)\n    protocol            = optional(string, null)\n    check_interval_sec  = optional(number, 10)\n    timeout_sec         = optional(number, 10)\n    healthy_threshold   = optional(number, 2)\n    unhealthy_threshold = optional(number, 2)\n    logging             = optional(bool, true)\n  })"
          },
          {
            "key": "firewall_networks",
            "defaultValue": [
              "default"
            ],
            "type": "list(string)"
          },
          {
            "key": "firewall_projects",
            "defaultValue": [
              "default"
            ],
            "type": "list(string)"
          },
          {
            "key": "target_tags",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "target_service_accounts",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "firewall_source_ranges",
            "defaultValue": [
              "10.129.0.0/23"
            ],
            "type": "list(string)"
          },
          {
            "key": "connection_draining_timeout_sec",
            "type": "number"
          },
          {
            "key": "enable_cdn",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "session_affinity",
            "type": "string"
          },
          {
            "key": "affinity_cookie_ttl_sec",
            "type": "number"
          },
          {
            "key": "locality_lb_policy",
            "type": "string"
          },
          {
            "key": "security_policy",
            "type": "string"
          },
          {
            "key": "timeout_sec",
            "type": "number"
          },
          {
            "key": "iap_config",
            "defaultValue": {
              "enable": false
            },
            "type": "object({\n    enable               = bool\n    oauth2_client_id     = optional(string)\n    oauth2_client_secret = optional(string)\n    iap_members          = optional(list(string))\n  })"
          }
        ]
      },
      {
        "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-frontend",
        "sharedTemplateRevisionUri": "projects/gcpdesigncenter/locations/us-central1/spaces/googlespace/sharedTemplates/5b366b1e-1bd1-4b01-a39a-f0c5e0b6dbae/revisions/r-9",
        "parameters": [
          {
            "key": "project_id",
            "value": "SOURCE_PROJECT_ID"
          },
          {
            "key": "region",
            "value": "us-central1"
          },
          {
            "key": "name",
            "value": "lta2"
          },
          {
            "key": "network",
            "value": "default"
          },
          {
            "key": "subnetwork",
            "value": "lta-proxy-only-subnetwork"
          },
          {
            "key": "proxy_only_subnet_ip",
            "value": "10.2.0.0/16"
          }
        ],
        "connections": [
          {
            "uri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-frontend/connections/lb-frontend-lb-backend-conn",
            "destinationComponentUri": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-backend",
            "sourceComponentParameters": [
              {
                "key": "url_map_input",
                "value": "module.regional-lb-backend.backend_service_info"
              }
            ]
          }
        ],
        "roles": [
          "roles/iam.serviceAccountAdmin",
          "roles/storage.admin",
          "roles/compute.admin",
          "roles/run.admin",
          "roles/iam.serviceAccountUser",
          "roles/certificatemanager.owner",
          "roles/vpcaccess.admin",
          "roles/serviceusage.serviceUsageAdmin"
        ],
        "apis": [
          "certificatemanager.googleapis.com",
          "cloudresourcemanager.googleapis.com",
          "compute.googleapis.com",
          "iam.googleapis.com",
          "run.googleapis.com",
          "serviceusage.googleapis.com",
          "storage-api.googleapis.com",
          "vpcaccess.googleapis.com"
        ],
        "connectionsParameters": [
          {
            "connection": "projects/SOURCE_PROJECT_ID/locations/us-central1/spaces/default-space/applicationTemplates/lta-dev-app/components/regional-lb-frontend/connections/lb-frontend-lb-backend-conn",
            "parameters": [
              {
                "key": "url_map_input",
                "value": "module.regional-lb-backend.backend_service_info"
              }
            ]
          }
        ],
        "componentParameterSchema": [
          {
            "key": "project_id",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "region",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "name",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "network",
            "isRequired": true,
            "type": "string"
          },
          {
            "key": "subnetwork",
            "type": "string"
          },
          {
            "key": "create_proxy_only_subnet",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "proxy_only_subnet_ip",
            "defaultValue": "10.129.0.0/23",
            "type": "string"
          },
          {
            "key": "load_balancing_scheme",
            "defaultValue": "EXTERNAL_MANAGED",
            "type": "string"
          },
          {
            "key": "create_url_map",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "url_map_input",
            "defaultValue": [],
            "type": "list(object({\n    host            = string\n    path            = string\n    backend_service = string\n  }))"
          },
          {
            "key": "url_map_resource_uri",
            "type": "string"
          },
          {
            "key": "create_address",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "address",
            "type": "string"
          },
          {
            "key": "enable_ipv6",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "create_ipv6_address",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "ipv6_address",
            "type": "string"
          },
          {
            "key": "labels",
            "defaultValue": {},
            "type": "map(string)"
          },
          {
            "key": "ssl",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "create_ssl_certificate",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "private_key",
            "type": "string"
          },
          {
            "key": "certificate",
            "type": "string"
          },
          {
            "key": "ssl_certificates",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "managed_ssl_certificate_domains",
            "defaultValue": [],
            "type": "list(string)"
          },
          {
            "key": "random_certificate_suffix",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "http_port",
            "defaultValue": 80,
            "type": "number"
          },
          {
            "key": "https_port",
            "defaultValue": 443,
            "type": "number"
          },
          {
            "key": "https_redirect",
            "defaultValue": false,
            "type": "bool"
          },
          {
            "key": "http_forward",
            "defaultValue": true,
            "type": "bool"
          },
          {
            "key": "ssl_policy",
            "type": "string"
          },
          {
            "key": "server_tls_policy",
            "type": "string"
          },
          {
            "key": "http_keep_alive_timeout_sec",
            "type": "number"
          }
        ]
      }
    ]
  }
}